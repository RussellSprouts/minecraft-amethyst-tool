'use strict';function A(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f}function Eb(a,b){if(!(a instanceof b))throw Error(`Expected element ${a} to be ${b}`);return a}
function Fb(a){if(null==a)throw Error("Got null value.");return a}function E(a,b){a=document.querySelector(a);return b?Eb(a,b):Eb(a,HTMLElement)}
var Gb={Version:"int",MinecraftDataVersion:"int",Metadata:{Name:"string",Author:"string",Description:"string",EnclosingSize:{x:"int",y:"int",z:"int"},TimeCreated:"long",TimeModified:"long",TotalBlocks:"int",TotalVolume:"int",RegionCount:"int"},Regions:{"*":{BlockStatePalette:[{Name:"string",Properties:{"*":"string"}}],BlockStates:"longArray",Position:{x:"int",y:"int",z:"int"},Size:{x:"int",y:"int",z:"int"},Entities:[{"*":"*"}],TileEntities:[{"*":"*"}],PendingBlockTicks:[{"*":"*"}]}}};
function Hb(a){const [b,c]=a.split("[");a={};if(c)for(const d of c.slice(0,-1).split(",")){const [e,f]=d.split("=");a[e]=f}return{Name:b,Properties:a}}function Ib(a,b){if(void 0!==a.m[b])return a.m[b];a.j.push(b);a.m[b]=a.j.length-1;return a.m[b]}function Jb(a,b){return a.j[b]??"minecraft:air"}
var Kb=class{constructor(){this.m={["minecraft:air"]:0};this.j=["minecraft:air"]}},Lb=class{constructor(a){this.u=new Ja(Gb);this.o=new Kb;this.j=new Na;this.m=this.u.parse(a);a=Object.keys(this.m.Regions);for(const d of a){var b=this.m.Regions[d];a=b.BlockStatePalette.map(Xa);var c=Math.max(Math.ceil(Math.log2(a.length)),2);const e=b.Size.x,f=b.Size.y,g=b.Size.z,h=b.Position.x+(0>e?e+1:0),l=b.Position.y+(0>f?f+1:0),p=b.Position.z+(0>g?g+1:0);b=(0,Ua)(b.BlockStates,c,Math.abs(e*f*g),!0);for(let r=
0,w=0;r<Math.abs(f);r++)for(c=0;c<Math.abs(g);c++)for(let H=0;H<Math.abs(e);H++,w++){const J=Ib(this.o,a[b[w]]);this.j.set(h+H,l+r,p+c,J)}}}K(a,b,c){return 0>a||a>=this.width||0>b||b>=this.height||0>c||c>=this.length?"minecraft:air":Jb(this.o,this.j.get(this.j.u+a,this.j.B+b,this.j.C+c))}get version(){return this.m.Version}get name(){return this.m.Metadata.Name}get description(){return this.m.Metadata.Description}get width(){return this.j.width}get height(){return this.j.height}get length(){return this.j.length}};
function Mb(a){a.onmessage=b=>{if("progress"===b.data.event){var c=eb.get(b.data.id);if(!c)throw Error(`Missing progressHandler for ${b.data.event}:${b.data.id}`);c(b.data.value)}else{c=db.get(b.data.id);if(!c)throw Error(`Missing resolver for ${b.data.event}:${b.data.id}`);db.delete(b.data.id);eb.delete(b.data.id);c(b.data.value)}}}
function Nb(){var a=document.querySelectorAll('script[type="application/russellsprouts-worker"]');for(const c of a){var b=(0,Eb)(c,HTMLScriptElement);a=(0,Fb)(b.dataset.name);b=(0,Fb)(b.getAttribute("src"));console.log("Creating named worker",a,b);b=new Worker(b);b.postMessage({event:"init-worker",value:{name:a}});for(const [d,e]of cb.entries()){const f=new MessageChannel;b.postMessage({event:"register-worker",value:{name:d}},[f.port1]);e.postMessage({event:"register-worker",value:{name:a}},[f.port2])}cb.set(a,
b);Mb(b)}}var M=THREE;var Ob=OrbitControls;const Pb=[{A:[-.5,-.5,.5],v:[0,0,1],uv:[0,0]},{A:[.5,-.5,.5],v:[0,0,1],uv:[1,0]},{A:[-.5,.5,.5],v:[0,0,1],uv:[0,1]},{A:[.5,.5,.5],v:[0,0,1],uv:[1,1]},{A:[.5,-.5,.5],v:[1,0,0],uv:[0,0]},{A:[.5,-.5,-.5],v:[1,0,0],uv:[1,0]},{A:[.5,.5,.5],v:[1,0,0],uv:[0,1]},{A:[.5,.5,-.5],v:[1,0,0],uv:[1,1]},{A:[.5,-.5,-.5],v:[0,0,-1],uv:[0,0]},{A:[-.5,-.5,-.5],v:[0,0,-1],uv:[1,0]},{A:[.5,.5,-.5],v:[0,0,-1],uv:[0,1]},{A:[-.5,.5,-.5],v:[0,0,-1],uv:[1,1]},{A:[-.5,-.5,-.5],v:[-1,0,0],uv:[0,0]},{A:[-.5,-.5,.5],v:[-1,0,0],
uv:[1,0]},{A:[-.5,.5,-.5],v:[-1,0,0],uv:[0,1]},{A:[-.5,.5,.5],v:[-1,0,0],uv:[1,1]},{A:[.5,.5,-.5],v:[0,1,0],uv:[0,0]},{A:[-.5,.5,-.5],v:[0,1,0],uv:[1,0]},{A:[.5,.5,.5],v:[0,1,0],uv:[0,1]},{A:[-.5,.5,.5],v:[0,1,0],uv:[1,1]},{A:[.5,-.5,.5],v:[0,-1,0],uv:[0,0]},{A:[-.5,-.5,.5],v:[0,-1,0],uv:[1,0]},{A:[.5,-.5,-.5],v:[0,-1,0],uv:[0,1]},{A:[-.5,-.5,-.5],v:[0,-1,0],uv:[1,1]}],Qb=new Uint16Array([0,1,2,2,1,3,4,5,6,6,5,7,8,9,10,10,9,11,12,13,14,14,13,15,16,17,18,18,17,19,20,21,22,22,21,23]),Rb=[],Sb=[],Tb=
[];for(const a of Pb)Rb.push(...a.A),Sb.push(...a.v),Tb.push(...a.uv);const Ub=new Float32Array(Rb),Vb=new Float32Array(Sb),Wb=new Float32Array(Tb);
function N(a,b,c,d,e,f,g=16,h=16,l=16,p=0,r=0,w=0,H=0){a=[a,b,c,d,e,f];b=new M.BufferGeometry;if(16===g&&16===h&&16===l&&0===H)b.setAttribute("position",new M.BufferAttribute(Ub,3));else{c=new Float32Array(Ub);for(d=0;d<c.length;d+=3)c[d]=(p-Vb[d]*H+(0<c[d]?g:0))/16-.5,c[d+1]=(r-Vb[d+1]*H+(0<c[d+1]?h:0))/16-.5,c[d+2]=(w-Vb[d+2]*H+(0<c[d+2]?l:0))/16-.5;b.setAttribute("position",new M.BufferAttribute(c,3))}b.setAttribute("normal",new M.BufferAttribute(Vb,3));g=[[g,h],[l,h],[g,h],[l,h],[g,l],[g,l]];
h=new Float32Array(Wb);for(l=0;l<h.length;l+=2){r=Math.floor(l/8);p=a[r];const [J,C]=g[r];r=J/16;w=1-(17*p+C)/1529;p=1-17*p/1529;h[l]=0!==h[l]?r:0;h[l+1]=0!==h[l+1]?p:w}b.setAttribute("uv",new M.BufferAttribute(h,2));b.setIndex(new M.BufferAttribute(Qb,1));return b}function Xb(a){return N(a,a,a,a,a,a)}function Yb(a,b=1){return new M.MeshStandardMaterial({color:a,opacity:b,transparent:1!==b})}var Zb=(new M.TextureLoader).load("data:image/png;base64,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");
Zb.minFilter=M.NearestFilter;Zb.magFilter=M.NearestFilter;var $b=new M.Euler(0,0,0),ac=new M.Euler(Math.PI,0,0),bc=new M.Euler(-Math.PI/2,0,0),cc=new M.Euler(-Math.PI/2,0,Math.PI),dc=new M.Euler(-Math.PI/2,0,-Math.PI/2),ec=new M.Euler(-Math.PI/2,0,Math.PI/2),fc=new M.Euler(0,Math.PI/2,0),gc=new M.Euler(0,Math.PI,0),hc=new M.Euler(0,-Math.PI/2,0),ic=new M.MeshStandardMaterial({map:Zb}),jc=new M.MeshStandardMaterial({map:Zb,transparent:!0,alphaTest:.5});const kc=Xb(39);var lc=class{get j(){return kc}get o(){return ic}get m(){return $b}};
function mc(a){const b=Object.getOwnPropertyDescriptors(a.prototype);for(const [c,d]of Object.entries(b))if(d.get){const e=d.get;Object.defineProperty(a.prototype,c,{get(){const f=e.call(this);Object.defineProperty(this,c,{value:f});return f}})}return class extends a{constructor(...c){super(c[0]);for(const [d,e]of Object.entries(c[0].Properties))void 0===this[d]&&console.warn("Missing default value for",c[0].Name,d),this[d]="number"===typeof this[d]?Number(e):"boolean"===typeof this[d]?"true"===e:
e}}}function nc(a){return"north"===a.facing?$b:"south"===a.facing?gc:"east"===a.facing?hc:"west"===a.facing?fc:(0,va)(a.facing)}function oc(a){return"up"===a.facing?$b:"south"===a.facing?cc:"east"===a.facing?dc:"west"===a.facing?ec:"down"===a.facing?ac:"north"===a.facing?bc:(0,va)(a.facing)}function pc(a){let b=class extends lc{get j(){return Xb(a)}};return b=(0,A)([mc],b)}function qc(a,b){let c=class extends lc{get o(){return Yb(a,b)}};return c=(0,A)([mc],c)};var rc=class extends lc{constructor(){super(...arguments);this.facing="north";this.waterlogged=!1;this.u=39}get j(){const a=this.u;return M.BufferGeometryUtils.mergeBufferGeometries([(0,N)(a,22,a,22,22,22,16,16,16,0,0,0,8),(0,N)(22,a,22,a,22,22,16,16,16,0,0,0,8)]).rotateY(Math.PI/4)}get m(){return(0,oc)(this)}get o(){return jc}};rc=(0,A)([mc],rc);var sc=class extends rc{constructor(){super(...arguments);this.u=35}};sc=(0,A)([mc],sc);
var tc=class extends rc{constructor(){super(...arguments);this.u=36}};tc=(0,A)([mc],tc);var uc=class extends rc{constructor(){super(...arguments);this.u=37}};uc=(0,A)([mc],uc);var vc=class extends rc{constructor(){super(...arguments);this.u=38}};vc=(0,A)([mc],vc);var wc=class extends lc{constructor(){super(...arguments);this.facing="north";this.type="single";this.waterlogged=!1}get j(){const a=this.type;return"single"===a?M.BufferGeometryUtils.mergeBufferGeometries([(0,N)(81,81,83,81,82,82,14,14,14,1,0,1)]):"left"===a?(0,N)(85,22,87,81,89,89,15,14,14,1,0,1):"right"===a?(0,N)(88,81,84,22,86,86,15,14,14,0,0,1):(0,va)(a)}get m(){return(0,nc)(this)}};wc=(0,A)([mc],wc);var xc=class extends lc{constructor(){super(...arguments);this.facing="north";this.mode="compare";this.powered=!1}get j(){const a=this.mode,b=this.powered,c="subtract"===a?27:26,d="subtract"===a?30:29,e=b?27:26,f=b?30:29;return M.BufferGeometryUtils.mergeBufferGeometries([(0,N)(28,28,28,28,b?33:32,23,16,2,16),(0,N)(c,c,c,c,d,d,4,4,4,6,"subtract"===a?2:1,11,1),(0,N)(e,e,e,e,f,f,4,6,4,3,2,1,1),(0,N)(e,e,e,e,f,f,4,6,4,9,2,1,1)])}get m(){return(0,nc)(this)}get o(){return jc}};xc=(0,A)([mc],xc);var yc=class extends lc{constructor(){super(...arguments);this.enabled=!0;this.facing="down"}get j(){const a="down"!==this.facing;return M.BufferGeometryUtils.mergeBufferGeometries([(0,N)(22,22,22,22,22,22,2,6,16,0,10,0),(0,N)(22,22,22,22,22,22,2,6,16,14,10,0),(0,N)(22,22,22,22,22,22,12,6,2,2,10,14),(0,N)(22,22,22,22,22,22,12,6,2,2,10,0),(0,N)(22,22,22,22,22,22,12,1,12,2,10,2),(0,N)(22,22,22,22,22,22,8,6,8,4,4,4),(0,N)(22,22,22,22,22,22,4,4,4,...(a?[6,4,0]:[6,0,6]))])}get o(){return(0,Yb)("#333")}get m(){return"down"===
this.facing?$b:(0,nc)(this)}};yc=(0,A)([mc],yc);var zc=class extends lc{constructor(){super(...arguments);this.facing="south";this.powered=!1}get j(){return(0,N)(10,11,10,11,12,13)}get m(){return(0,oc)(this)}};zc=(0,A)([mc],zc);var Ac=class extends lc{constructor(){super(...arguments);this.extended=!1;this.facing="north"}get j(){return this.extended?(0,N)(4,4,4,4,9,8,16,12,16):(0,N)(2,2,2,2,1,8)}get m(){return(0,oc)(this)}};Ac=(0,A)([mc],Ac);var Bc=class extends lc{constructor(){super(...arguments);this.facing="north";this["short"]=!1;this.type="normal"}get j(){var a=this.type;const b="sticky"===a?5:6;a="sticky"===a?0:1;return M.BufferGeometryUtils.mergeBufferGeometries([(0,N)(b,b,b,b,a,a,16,4,16,0,12,0),(0,N)(7,7,7,7,22,22,4,16,4,6,-4,6)])}get m(){return(0,oc)(this)}};Bc=(0,A)([mc],Bc);var Cc=class extends lc{constructor(){super(...arguments);this.lit=!1}get j(){return this.lit?(0,Xb)(16):(0,Xb)(15)}};Cc=(0,A)([mc],Cc);const Dc={"":44,n:40,s:40,e:42,w:42,ns:40,ew:42,nw:48,ne:50,se:52,sw:54,nsw:56,"new":58,nse:60,sew:62,nsew:46};
var Ec=class extends lc{constructor(){super(...arguments);this.north=this.east="none";this.power=0;this.west=this.south="none"}get j(){const a=this.east,b=this.north,c=this.south,d=this.west,e=0===this.power?1:0;return(0,N)("up"===c?e+40:22,"up"===a?e+40:22,"up"===b?e+40:22,"up"===d?e+40:22,22,Dc[("none"===b?"":"n")+("none"===c?"":"s")+("none"===a?"":"e")+("none"===d?"":"w")]+e,16,16,16,0,0,0,.01)}get o(){return new M.MeshStandardMaterial({map:Zb,transparent:!0,side:M.DoubleSide,alphaTest:.5})}};
Ec=(0,A)([mc],Ec);var Fc=class extends lc{constructor(){super(...arguments);this.delay=1;this.facing="north";this.powered=this.locked=!1}get j(){const a=this.powered,b=this.delay,c=this.locked,d=a?27:26,e=a?30:29;return M.BufferGeometryUtils.mergeBufferGeometries([(0,N)(28,28,28,28,a?25:24,23,16,2,16),c?(0,N)(31,31,31,31,31,31,12,2,2,2,2,10-2*b):(0,N)(d,d,d,d,e,e,4,6,4,6,2,9-2*b,1),(0,N)(d,d,d,d,e,e,4,6,4,6,2,11,1)])}get m(){return(0,nc)(this)}get o(){return jc}};Fc=(0,A)([mc],Fc);var Gc=class extends lc{constructor(){super(...arguments);this.bottom=!1;this.distance=7;this.waterlogged=!1}get j(){return(0,N)(21,21,21,21,20,this.bottom?20:22)}get o(){return new M.MeshStandardMaterial({map:Zb,transparent:!0,side:M.DoubleSide,alphaTest:.5})}};Gc=(0,A)([mc],Gc);var Hc=class extends lc{get j(){return(0,Xb)(18)}get o(){return new M.MeshStandardMaterial({map:Zb,transparent:!0,alphaTest:.5,opacity:.75})}};Hc=(0,A)([mc],Hc);var Ic=class extends lc{constructor(){super(...arguments);this.extended=!1;this.facing="north"}get j(){return this.extended?(0,N)(4,4,4,4,9,8,16,12,16):(0,N)(3,3,3,3,0,8)}get m(){return(0,oc)(this)}};Ic=(0,A)([mc],Ic);var Jc=class extends lc{constructor(){super(...arguments);this.face="wall";this.facing="north";this.powered=!1}get j(){return(new M.BoxGeometry(.375,.125,.25)).translate(0,-.4375,0)}get m(){const a=this.face,b=this.facing;return"ceiling"===a?ac:"floor"===a?$b:"north"===b?bc:"east"===b?dc:"south"===b?cc:"west"===b?ec:(0,va)(b)}get o(){return(0,Yb)("#888")}};Jc=(0,A)([mc],Jc);const Kc=new Map,Lc={"default":lc,"minecraft:amethyst_cluster":vc,"minecraft:chest":wc,"minecraft:comparator":xc,"minecraft:hopper":yc,"minecraft:large_amethyst_bud":uc,"minecraft:medium_amethyst_bud":tc,"minecraft:observer":zc,"minecraft:piston_head":Bc,"minecraft:piston":Ac,"minecraft:redstone_lamp":Cc,"minecraft:redstone_wire":Ec,"minecraft:repeater":Fc,"minecraft:scaffolding":Gc,"minecraft:slime_block":Hc,"minecraft:small_amethyst_bud":sc,"minecraft:sticky_piston":Ic,"minecraft:stone_button":Jc,
"minecraft:calcite":(0,qc)("#aaa"),"minecraft:smooth_basalt":(0,qc)("#333"),"minecraft:amethyst_block":(0,qc)("#7457a5"),"minecraft:budding_amethyst":(0,qc)("#ab8ae3"),"minecraft:stone":(0,qc)("#777"),"minecraft:dirt":(0,qc)("#61452e"),"minecraft:diorite":(0,qc)("#aaa"),"minecraft:andesite":(0,qc)("#777"),"minecraft:granite":(0,qc)("#7f5646"),"minecraft:deepslate":(0,qc)("#333"),"minecraft:gravel":(0,qc)("#888"),"minecraft:iron_block":(0,qc)("#aaa"),"minecraft:water":(0,qc)("#00f",.1),"minecraft:note_block":(0,
pc)(14),"minecraft:redstone_block":(0,pc)(17),"minecraft:obsidian":(0,pc)(19),"minecraft:coal_ore":(0,pc)(64),"minecraft:copper_ore":(0,pc)(66),"minecraft:lapis_ore":(0,pc)(68),"minecraft:iron_ore":(0,pc)(70),"minecraft:redstone_ore":(0,pc)(72),"minecraft:diamond_ore":(0,pc)(74),"minecraft:gold_ore":(0,pc)(76),"minecraft:emerald_ore":(0,pc)(78),"minecraft:deepslate_coal_ore":(0,pc)(65),"minecraft:deepslate_copper_ore":(0,pc)(67),"minecraft:deepslate_lapis_ore":(0,pc)(69),"minecraft:deepslate_iron_ore":(0,
pc)(71),"minecraft:deepslate_redstone_ore":(0,pc)(73),"minecraft:deepslate_diamond_ore":(0,pc)(75),"minecraft:deepslate_gold_ore":(0,pc)(77),"minecraft:deepslate_emerald_ore":(0,pc)(79),"minecraft:smooth_stone":(0,pc)(80)};function Mc(a){var b=Kc.get(a);if(null!=b)return b;b=(0,Hb)(a);b=new (Lc[b.Name]??Lc["default"])(b);Kc.set(a,b);return b};const Nc=(new M.TextureLoader).load("data:image/png;base64,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");
Nc.minFilter=M.NearestFilter;Nc.magFilter=M.NearestFilter;function Oc(a){a.u||(a.u=!0,requestAnimationFrame(()=>a.render()))}function Z(a,b,c,d,e){const f=(0,v)(b,c,d),g=(0,Mc)(e);a.m[f]!==e&&(a.m[f]=e,a.R[f]&&a.o.remove((0,Fb)(a.R[f])),a.R[f]=void 0,"minecraft:air"!==e&&"minecraft:cave_air"!==e&&(e=new M.Mesh(g.j,g.o),e.position.set(b,c,d),e.setRotationFromEuler(g.m),a.R[f]=e,a.o.add(e)))}function Pc(a,b,c,d){return a.m[(0,v)(b,c,d)]??"minecraft:air"}
function Qc(a){var b=a.N.domElement;const c=b.clientWidth,d=b.clientHeight;(b=b.width!==c||b.height!==d)&&a.N.setSize(c,d,!1);return b}
var Rc=class extends EventTarget{constructor(a){super();this.m={};this.R={};this.u=!1;this.L=!0;const b="string"===typeof a?(0,E)(a,HTMLCanvasElement):a;this.P=new IntersectionObserver(d=>{for(const e of d)this.L=e.isIntersecting});this.P.observe(b);this.N=new M.WebGLRenderer({canvas:b,antialias:!0});this.B=new M.Vector2;b.addEventListener("mousemove",d=>{const e=b.getBoundingClientRect();this.B.x=(d.clientX-e.left)/b.clientWidth*2-1;this.B.y=2*-((d.clientY-e.top)/b.clientHeight)+1;Oc(this)});this.M=
new M.Raycaster;a=new M.Scene;a.background=new M.Color("#fff");this.H=new M.DirectionalLight(7829367);this.H.position.set(0,1,0);a.add(this.H);this.F=new M.DirectionalLight(4473924);this.F.position.set(1,0,0);a.add(this.F);this.C=new M.DirectionalLight(4473924);this.C.position.set(-1,0,0);a.add(this.C);this.G=new M.DirectionalLight(2236962);this.G.position.set(0,0,1);a.add(this.G);this.D=new M.DirectionalLight(2236962);this.D.position.set(0,0,-1);a.add(this.D);this.O=new M.AmbientLight(8947848);a.add(this.O);
this.o=a;this.camera=new M.PerspectiveCamera(75,1,.1,1E3);a=new Ob.OrbitControls(this.camera,b);a.update();a.minDistance=1;a.maxDistance=100;this.j=a;const c=()=>{const d=this.N.domElement,e=d.clientWidth,f=d.clientHeight;if(d.width!==e||d.height!==f)this.N.setSize(e,f,!1),this.camera.aspect=e/f,this.camera.updateProjectionMatrix(),Oc(this)};a.addEventListener("change",()=>Oc(this));window.addEventListener("resize",()=>c());document.querySelector(".main-panel")?.addEventListener("sl-reposition",()=>
c());document.querySelector(".secondary-panel")?.addEventListener("sl-reposition",()=>c());this.render()}render(){if(this.L){this.u=!1;if(Qc(this)){var a=this.N.domElement;this.camera.aspect=a.clientWidth/a.clientHeight;this.camera.updateProjectionMatrix()}this.M.setFromCamera(this.B,this.camera);a=this.M.intersectObjects(this.o.children);for(var b of a){a=b.object.position.x|0;const c=b.object.position.y|0;b=b.object.position.z|0;this.dispatchEvent(new CustomEvent("hover",{detail:{x:a,y:c,z:b,U:Pc(this,
a,c,b)}}));break}this.j.update();this.N.render(this.o,this.camera)}else requestAnimationFrame(()=>this.render())}};const Sc=new Map;
async function Tc(){var a=await Promise.all(Array.from(document.querySelectorAll('object[type="application/vnd.litematica+nbt"]')).map(async d=>{var e=d.getAttribute("data");if(null==e)throw Error("embedded litematic must have a [data] attribute.");e=await fetch(e);return e.ok?{V:d,data:await e.arrayBuffer()}:{V:d,data:null}}));for(const {V:d,data:e}of a)if(e){a=(0,E)("#canvas",HTMLCanvasElement);const f=new Rc(a);f.j.autoRotate="true"===d.dataset.autorotate;a.addEventListener("dblclick",()=>{console.log(f.j.target,
f.camera.position)});a=await (0,Wa)(new Uint8Array(e));a=new Lb(a);for(var b=0;b<a.height;b++)for(var c=0;c<a.length;c++)for(let g=0;g<a.width;g++){const h=a.K(g,b,c);Z(f,g,b,c,h)}Sc.set(d,{N:f,ja:a});c=d.dataset.camera;b=d.dataset.target;null!=c&&null!=b?(a=(0,La)(c),b=(0,La)(b),f.camera.position.set(a[0],a[1],a[2]),f.j.target.set(b[0],b[1],b[2])):f.j.target.set(a.width/2,a.height/2,a.length/2)}for(const d of document.querySelectorAll(".revealer")){const e=()=>{var f=(0,Fb)(d.getAttribute("for"));
f=(0,Fb)(document.getElementById(f));const {N:g,ja:h}=(0,Fb)(Sc.get(f));f=Math.round(h.height*(1-Number(d.value)/100));console.log(f);for(let w=0;w<h.height;w++)for(let H=0;H<h.length;H++)for(let J=0;J<h.width;J++){var l=h.K(J,w,H);if("minecraft:smooth_basalt"===l||"minecraft:calcite"===l||"minecraft:amethyst_block"===l){l=J;var p=w,r=H;if(l=g.R[(0,v)(l,p,r)])l.visible=w<f}}};d.addEventListener("sl-change",()=>{e()});e()}};function Uc(){for(const a of document.getElementsByClassName("file-select")){const b=(0,Eb)(a,HTMLElement),c=(0,Eb)(b.querySelector("span"),HTMLSpanElement),d=(0,Eb)(b.querySelector("input"),HTMLInputElement),e=c.textContent;let f,g=0;b.dataset.warning&&(f=(0,E)(`#${b.dataset.warning}`),d.addEventListener("click",()=>{g=window.setTimeout(()=>{f.classList.remove("hidden")},1E4)}));d.addEventListener("change",()=>{d.files&&0!==d.files.length?(c.textContent=1===d.files.length?"1 file selected.":`${d.files.length} files selected.`,
g&&clearTimeout(g),f&&f.classList.add("hidden")):c.textContent=e})}};function Vc(a,b){var c=a.G[b];return c?c??0:(c=a.D.length,a.D[c]=b,a.G[b]=c)}function Wc(a){const b=a.canvas.getBoundingClientRect();0!==b.width&&0!==b.height&&(a.canvas.width=b.width,a.canvas.height=b.height)}function Xc(a){const b=a.canvas.width/2,c=a.canvas.height/2;return{left:a.u-b,right:a.u+b+a.j*a.m,top:a.B-c,bottom:a.B+c+a.j*a.m}}function Yc(a){try{a.isVisible()&&a.o&&(a.render(),a.o=!1)}finally{requestAnimationFrame(()=>Yc(a))}}
function Zc(a,b,c,d){b=Math.floor(b/32);c=Math.floor(c/32);c=(0,v)(b,0,c);a=1===d?a.L:4===d?a.O:a.M;return(d=a[c])?d:a[c]=new Uint16Array(1024)}function $c(a,b,c,d,e=1){4===e?a.F=!0:16===e&&(a.F=a.H=!0);b=Math.floor(b/e);c=Math.floor(c/e);Zc(a,b,c,e)[(b&31)+32*(c&31)]=Vc(a,d)}function ad(a,b,c,d=1){var e=Math.floor(b/d);let f=Math.floor(c/d);const g=Zc(a,e,f,d);if(!g)return a.C;e=g[(e&31)+32*(f&31)];return 0===e&&16!==d?ad(a,b,c,4*d):a.D[e]??a.C}
var bd=class{constructor(a){this.C="#999";this.L={};this.O={};this.M={};this.m=1;this.G={};this.D=[];this.B=this.u=0;this.j=16;this.o=this.H=this.F=!1;this.canvas=a instanceof HTMLCanvasElement?a:(0,E)(a,HTMLCanvasElement);this.context=(0,Eb)(this.canvas.getContext("2d"),CanvasRenderingContext2D);Vc(this,this.C);Wc(this);this.canvas.addEventListener("mousemove",b=>{1===b.buttons&&(this.u-=b.movementX,this.B-=b.movementY,this.o=!0)},{passive:!0});this.canvas.addEventListener("wheel",b=>{b.preventDefault();
var c=Xc(this);const d=this.canvas.getBoundingClientRect(),e=(c.left+b.clientX-d.left)/this.j;c=(c.top+b.clientY-d.top)/this.j;this.j-=Math.sign(b.deltaY)/this.m;1===this.m?2>this.j&&(this.j=2,this.F&&(this.m=4)):4===this.m?this.j<2/this.m?(this.j=2/this.m,this.H&&(this.m=16)):2<=this.j&&(this.m=1,this.j=2):16===this.m&&(this.j<2/this.m?this.j=2/this.m:.5<=this.j&&(this.m=4,this.j=Math.round(2*this.j)/2));const f=Xc(this),g=(f.top+b.clientY-d.top)/this.j;this.u+=this.j*(e-(f.left+b.clientX-d.left)/
this.j);this.B+=this.j*(c-g);this.o=!0});requestAnimationFrame(()=>Yc(this))}render(){Wc(this);this.context.fillStyle=this.C;this.context.fillRect(0,0,this.canvas.width,this.canvas.height);const {left:a,right:b,top:c,bottom:d}=Xc(this);for(let e=c;e<d;e+=this.j*this.m)for(let f=a;f<b;f+=this.j*this.m){const g=Math.floor(f/this.j/this.m),h=Math.floor(e/this.j/this.m);this.context.fillStyle=ad(this,g*this.m,h*this.m,this.m);this.context.fillRect(Math.floor(g*this.j*this.m-a),Math.floor(h*this.j*this.m-
c),this.j*this.m,this.j*this.m)}}isVisible(){return null!==this.canvas.offsetParent}addEventListener(a,b){this.canvas.addEventListener(a,c=>{const {left:d,top:e}=Xc(this),f=this.canvas.getBoundingClientRect();b(Math.floor((d+(c.clientX-f.left))/this.j),Math.floor((e+(c.clientY-f.top))/this.j))},{passive:!0})}};
//# sourceMappingURL=renderer.js.map
