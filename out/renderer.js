'use strict';function u(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f}function w(a,b){if(!(a instanceof b))throw Error(`Expected element ${a} to be ${b}`);return a}
function hb(a){if(null==a)throw Error("Got null value.");return a}function ib(a){return a.split(":").map(b=>+b)}
var jb=class{constructor(){this.segments={};this.G=!1;this.D=!0;this.C=this.o=this.B=this.m=this.u=this.j=0}get width(){return this.u-this.j+1}get height(){return this.B-this.m+1}get length(){return this.C-this.o+1}get(a,b,c){var d=Math.floor(a/16);const e=Math.floor(b/16),f=Math.floor(c/16);a=(a%16+16)%16;b=(b%16+16)%16;c=(c%16+16)%16;d=(0,t)(d,e,f);return null==this.segments[d]?0:this.segments[d][a+16*(c+16*b)]}set(a,b,c,d){255<d&&(this.G=!0);this.D?(this.u=this.j=a,this.B=this.m=b,this.C=this.o=
c,this.D=!1):(this.u=Math.max(this.u,a),this.B=Math.max(this.B,b),this.C=Math.max(this.C,c),this.j=Math.min(this.j,a),this.m=Math.min(this.m,b),this.o=Math.min(this.o,c));var e=Math.floor(a/16);const f=Math.floor(b/16),g=Math.floor(c/16);a=(a%16+16)%16;b=(b%16+16)%16;c=(c%16+16)%16;e=(0,t)(e,f,g);null==this.segments[e]?this.segments[e]=255<d?new Uint16Array(4096):new Uint8Array(4096):255<d&&this.segments[e]instanceof Uint8Array&&(this.segments[e]=Uint16Array.from(this.segments[e]));this.segments[e][a+
16*(c+16*b)]=d}},kb={Version:"int",MinecraftDataVersion:"int",Metadata:{Name:"string",Author:"string",Description:"string",EnclosingSize:{x:"int",y:"int",z:"int"},TimeCreated:"long",TimeModified:"long",TotalBlocks:"int",TotalVolume:"int",RegionCount:"int"},Regions:{"*":{BlockStatePalette:[{Name:"string",Properties:{"*":"string"}}],BlockStates:"longArray",Position:{x:"int",y:"int",z:"int"},Size:{x:"int",y:"int",z:"int"},Entities:[{"*":"*"}],TileEntities:[{"*":"*"}],PendingBlockTicks:[{"*":"*"}]}}};
function lb(a){const [b,c]=a.split("[");a={};if(c)for(const d of c.slice(0,-1).split(",")){const [e,f]=d.split("=");a[e]=f}return{Name:b,Properties:a}}function mb(a,b){if(void 0!==a.m[b])return a.m[b];a.j.push(b);a.m[b]=a.j.length-1;return a.m[b]}function nb(a,b){return a.j[b]??"minecraft:air"}
var ob=class{constructor(){this.m={"minecraft:air":0};this.j=["minecraft:air"]}},pb=class{constructor(a){this.u=new Ia(kb);this.o=new ob;this.j=new jb;this.m=this.u.parse(a);a=Object.keys(this.m.Regions);for(const d of a){var b=this.m.Regions[d];a=b.BlockStatePalette.map(Na);var c=Math.max(Math.ceil(Math.log2(a.length)),2);const e=b.Size.x,f=b.Size.y,g=b.Size.z,h=b.Position.x+(0>e?e+1:0),k=b.Position.y+(0>f?f+1:0),x=b.Position.z+(0>g?g+1:0);b=(0,Ja)(b.BlockStates,c,Math.abs(e*f*g),!0);for(let v=0,
l=0;v<Math.abs(f);v++)for(c=0;c<Math.abs(g);c++)for(let q=0;q<Math.abs(e);q++,l++){const z=mb(this.o,a[b[l]]);this.j.set(h+q,k+v,x+c,z)}}}F(a,b,c){return 0>a||a>=this.width||0>b||b>=this.height||0>c||c>=this.length?"minecraft:air":nb(this.o,this.j.get(this.j.j+a,this.j.m+b,this.j.o+c))}get version(){return this.m.Version}get name(){return this.m.Metadata.Name}get description(){return this.m.Metadata.Description}get width(){return this.j.width}get height(){return this.j.height}get length(){return this.j.length}};
function qb(a){a.onmessage=b=>{if("progress"===b.data.event){var c=cb.get(b.data.id);if(!c)throw Error(`Missing progressHandler for ${b.data.event}:${b.data.id}`);c(b.data.value)}else{c=bb.get(b.data.id);if(!c)throw Error(`Missing resolver for ${b.data.event}:${b.data.id}`);bb.delete(b.data.id);cb.delete(b.data.id);c(b.data.value)}}}
function rb(a){const b=new Worker("out/worker.js");b.postMessage({event:"init-worker",value:{name:a}});for(const [c,d]of ab.entries()){const e=new MessageChannel;b.postMessage({event:"register-worker",value:{name:c}},[e.port1]);d.postMessage({event:"register-worker",value:{name:a}},[e.port2])}ab.set(a,b);qb(b)}var B=THREE;var sb=OrbitControls;const tb=[{A:[-.5,-.5,.5],v:[0,0,1],uv:[0,0]},{A:[.5,-.5,.5],v:[0,0,1],uv:[1,0]},{A:[-.5,.5,.5],v:[0,0,1],uv:[0,1]},{A:[.5,.5,.5],v:[0,0,1],uv:[1,1]},{A:[.5,-.5,.5],v:[1,0,0],uv:[0,0]},{A:[.5,-.5,-.5],v:[1,0,0],uv:[1,0]},{A:[.5,.5,.5],v:[1,0,0],uv:[0,1]},{A:[.5,.5,-.5],v:[1,0,0],uv:[1,1]},{A:[.5,-.5,-.5],v:[0,0,-1],uv:[0,0]},{A:[-.5,-.5,-.5],v:[0,0,-1],uv:[1,0]},{A:[.5,.5,-.5],v:[0,0,-1],uv:[0,1]},{A:[-.5,.5,-.5],v:[0,0,-1],uv:[1,1]},{A:[-.5,-.5,-.5],v:[-1,0,0],uv:[0,0]},{A:[-.5,-.5,.5],v:[-1,0,0],
uv:[1,0]},{A:[-.5,.5,-.5],v:[-1,0,0],uv:[0,1]},{A:[-.5,.5,.5],v:[-1,0,0],uv:[1,1]},{A:[.5,.5,-.5],v:[0,1,0],uv:[0,0]},{A:[-.5,.5,-.5],v:[0,1,0],uv:[1,0]},{A:[.5,.5,.5],v:[0,1,0],uv:[0,1]},{A:[-.5,.5,.5],v:[0,1,0],uv:[1,1]},{A:[.5,-.5,.5],v:[0,-1,0],uv:[0,0]},{A:[-.5,-.5,.5],v:[0,-1,0],uv:[1,0]},{A:[.5,-.5,-.5],v:[0,-1,0],uv:[0,1]},{A:[-.5,-.5,-.5],v:[0,-1,0],uv:[1,1]}],ub=new Uint16Array([0,1,2,2,1,3,4,5,6,6,5,7,8,9,10,10,9,11,12,13,14,14,13,15,16,17,18,18,17,19,20,21,22,22,21,23]),vb=[],wb=[],xb=
[];for(const a of tb)vb.push(...a.A),wb.push(...a.v),xb.push(...a.uv);const yb=new Float32Array(vb),zb=new Float32Array(wb),Ab=new Float32Array(xb);
function N(a,b,c,d,e,f,g=16,h=16,k=16,x=0,v=0,l=0,q=0){a=[a,b,c,d,e,f];b=new B.BufferGeometry;if(16===g&&16===h&&16===k&&0===q)b.setAttribute("position",new B.BufferAttribute(yb,3));else{c=new Float32Array(yb);for(d=0;d<c.length;d+=3)c[d]=(x-zb[d]*q+(0<c[d]?g:0))/16-.5,c[d+1]=(v-zb[d+1]*q+(0<c[d+1]?h:0))/16-.5,c[d+2]=(l-zb[d+2]*q+(0<c[d+2]?k:0))/16-.5;b.setAttribute("position",new B.BufferAttribute(c,3))}b.setAttribute("normal",new B.BufferAttribute(zb,3));g=[[g,h],[k,h],[g,h],[k,h],[g,k],[g,k]];
h=new Float32Array(Ab);for(k=0;k<h.length;k+=2){v=Math.floor(k/8);x=a[v];const [z,y]=g[v];v=z/16;l=1-(17*x+y)/1529;x=1-17*x/1529;h[k]=0!==h[k]?v:0;h[k+1]=0!==h[k+1]?x:l}b.setAttribute("uv",new B.BufferAttribute(h,2));b.setIndex(new B.BufferAttribute(ub,1));return b}function Bb(a){return N(a,a,a,a,a,a)}function Cb(a,b=1){return new B.MeshStandardMaterial({color:a,opacity:b,transparent:1!==b})}var Db=(new B.TextureLoader).load("data:image/png;base64,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");
Db.minFilter=B.NearestFilter;Db.magFilter=B.NearestFilter;var Eb=new B.Euler(0,0,0),Fb=new B.Euler(Math.PI,0,0),Gb=new B.Euler(-Math.PI/2,0,0),Hb=new B.Euler(-Math.PI/2,0,Math.PI),Jb=new B.Euler(-Math.PI/2,0,-Math.PI/2),Kb=new B.Euler(-Math.PI/2,0,Math.PI/2),Lb=new B.Euler(0,Math.PI/2,0),Mb=new B.Euler(0,Math.PI,0),Nb=new B.Euler(0,-Math.PI/2,0),Ob=new B.MeshStandardMaterial({map:Db}),Pb=new B.MeshStandardMaterial({map:Db,transparent:!0,alphaTest:.5});const Qb=Bb(39);var Q=class{get j(){return Qb}get o(){return Ob}get m(){return Eb}};
function R(a){const b=Object.getOwnPropertyDescriptors(a.prototype);for(const [c,d]of Object.entries(b))if(d.get){const e=d.get;Object.defineProperty(a.prototype,c,{get(){const f=e.call(this);Object.defineProperty(this,c,{value:f});return f}})}return class extends a{constructor(...c){super(c[0]);for(const [d,e]of Object.entries(c[0].Properties))void 0===this[d]&&console.warn("Missing default value for",c[0].Name,d),this[d]="number"===typeof this[d]?Number(e):"boolean"===typeof this[d]?"true"===e:
e}}}function Rb(a){return"north"===a.facing?Eb:"south"===a.facing?Mb:"east"===a.facing?Nb:"west"===a.facing?Lb:(0,Aa)(a.facing)}function Sb(a){return"up"===a.facing?Eb:"south"===a.facing?Hb:"east"===a.facing?Jb:"west"===a.facing?Kb:"down"===a.facing?Fb:"north"===a.facing?Gb:(0,Aa)(a.facing)}function S(a){let b=class extends Q{get j(){return Bb(a)}};return b=(0,u)([R],b)}function Tb(a,b){let c=class extends Q{get o(){return Cb(a,b)}};return c=(0,u)([R],c)};var Ub=class extends Q{constructor(){super(...arguments);this.facing="north";this.waterlogged=!1;this.u=39}get j(){const a=this.u;return B.BufferGeometryUtils.mergeBufferGeometries([(0,N)(a,22,a,22,22,22,16,16,16,0,0,0,8),(0,N)(22,a,22,a,22,22,16,16,16,0,0,0,8)]).rotateY(Math.PI/4)}get m(){return(0,Sb)(this)}get o(){return Pb}};Ub=(0,u)([R],Ub);var Vb=class extends Ub{constructor(){super(...arguments);this.u=35}};Vb=(0,u)([R],Vb);var Wb=class extends Ub{constructor(){super(...arguments);this.u=36}};
Wb=(0,u)([R],Wb);var Xb=class extends Ub{constructor(){super(...arguments);this.u=37}};Xb=(0,u)([R],Xb);var Yb=class extends Ub{constructor(){super(...arguments);this.u=38}};Yb=(0,u)([R],Yb);var Zb=class extends Q{constructor(){super(...arguments);this.facing="north";this.type="single";this.waterlogged=!1}get j(){const a=this.type;return"single"===a?B.BufferGeometryUtils.mergeBufferGeometries([(0,N)(81,81,83,81,82,82,14,14,14,1,0,1)]):"left"===a?(0,N)(85,22,87,81,89,89,15,14,14,1,0,1):"right"===a?(0,N)(88,81,84,22,86,86,15,14,14,0,0,1):(0,Aa)(a)}get m(){return(0,Rb)(this)}};Zb=(0,u)([R],Zb);var $b=class extends Q{constructor(){super(...arguments);this.facing="north";this.mode="compare";this.powered=!1}get j(){const a=this.mode,b=this.powered,c="subtract"===a?27:26,d="subtract"===a?30:29,e=b?27:26,f=b?30:29;return B.BufferGeometryUtils.mergeBufferGeometries([(0,N)(28,28,28,28,b?33:32,23,16,2,16),(0,N)(c,c,c,c,d,d,4,4,4,6,"subtract"===a?2:1,11,1),(0,N)(e,e,e,e,f,f,4,6,4,3,2,1,1),(0,N)(e,e,e,e,f,f,4,6,4,9,2,1,1)])}get m(){return(0,Rb)(this)}get o(){return Pb}};$b=(0,u)([R],$b);var ac=class extends Q{constructor(){super(...arguments);this.enabled=!0;this.facing="down"}get j(){const a="down"!==this.facing;return B.BufferGeometryUtils.mergeBufferGeometries([(0,N)(22,22,22,22,22,22,2,6,16,0,10,0),(0,N)(22,22,22,22,22,22,2,6,16,14,10,0),(0,N)(22,22,22,22,22,22,12,6,2,2,10,14),(0,N)(22,22,22,22,22,22,12,6,2,2,10,0),(0,N)(22,22,22,22,22,22,12,1,12,2,10,2),(0,N)(22,22,22,22,22,22,8,6,8,4,4,4),(0,N)(22,22,22,22,22,22,4,4,4,...(a?[6,4,0]:[6,0,6]))])}get o(){return(0,Cb)("#333")}get m(){return"down"===
this.facing?Eb:(0,Rb)(this)}};ac=(0,u)([R],ac);var bc=class extends Q{constructor(){super(...arguments);this.facing="south";this.powered=!1}get j(){return(0,N)(10,11,10,11,12,13)}get m(){return(0,Sb)(this)}};bc=(0,u)([R],bc);var cc=class extends Q{constructor(){super(...arguments);this.extended=!1;this.facing="north"}get j(){return this.extended?(0,N)(4,4,4,4,9,8,16,12,16):(0,N)(2,2,2,2,1,8)}get m(){return(0,Sb)(this)}};cc=(0,u)([R],cc);var dc=class extends Q{constructor(){super(...arguments);this.facing="north";this["short"]=!1;this.type="normal"}get j(){var a=this.type;const b="sticky"===a?5:6;a="sticky"===a?0:1;return B.BufferGeometryUtils.mergeBufferGeometries([(0,N)(b,b,b,b,a,a,16,4,16,0,12,0),(0,N)(7,7,7,7,22,22,4,16,4,6,-4,6)])}get m(){return(0,Sb)(this)}};dc=(0,u)([R],dc);var ec=class extends Q{constructor(){super(...arguments);this.lit=!1}get j(){return this.lit?(0,Bb)(16):(0,Bb)(15)}};ec=(0,u)([R],ec);const fc={"":44,n:40,s:40,e:42,w:42,ns:40,ew:42,nw:48,ne:50,se:52,sw:54,nsw:56,"new":58,nse:60,sew:62,nsew:46};
var gc=class extends Q{constructor(){super(...arguments);this.north=this.east="none";this.power=0;this.west=this.south="none"}get j(){const a=this.east,b=this.north,c=this.south,d=this.west,e=0===this.power?1:0;return(0,N)("up"===c?e+40:22,"up"===a?e+40:22,"up"===b?e+40:22,"up"===d?e+40:22,22,fc[("none"===b?"":"n")+("none"===c?"":"s")+("none"===a?"":"e")+("none"===d?"":"w")]+e,16,16,16,0,0,0,.01)}get o(){return new B.MeshStandardMaterial({map:Db,transparent:!0,side:B.DoubleSide,alphaTest:.5})}};
gc=(0,u)([R],gc);var hc=class extends Q{constructor(){super(...arguments);this.delay=1;this.facing="north";this.powered=this.locked=!1}get j(){const a=this.powered,b=this.delay,c=this.locked,d=a?27:26,e=a?30:29;return B.BufferGeometryUtils.mergeBufferGeometries([(0,N)(28,28,28,28,a?25:24,23,16,2,16),c?(0,N)(31,31,31,31,31,31,12,2,2,2,2,10-2*b):(0,N)(d,d,d,d,e,e,4,6,4,6,2,9-2*b,1),(0,N)(d,d,d,d,e,e,4,6,4,6,2,11,1)])}get m(){return(0,Rb)(this)}get o(){return Pb}};hc=(0,u)([R],hc);var ic=class extends Q{constructor(){super(...arguments);this.bottom=!1;this.distance=7;this.waterlogged=!1}get j(){return(0,N)(21,21,21,21,20,this.bottom?20:22)}get o(){return new B.MeshStandardMaterial({map:Db,transparent:!0,side:B.DoubleSide,alphaTest:.5})}};ic=(0,u)([R],ic);var jc=class extends Q{get j(){return(0,Bb)(18)}get o(){return new B.MeshStandardMaterial({map:Db,transparent:!0,alphaTest:.5,opacity:.75})}};jc=(0,u)([R],jc);var kc=class extends Q{constructor(){super(...arguments);this.extended=!1;this.facing="north"}get j(){return this.extended?(0,N)(4,4,4,4,9,8,16,12,16):(0,N)(3,3,3,3,0,8)}get m(){return(0,Sb)(this)}};kc=(0,u)([R],kc);var lc=class extends Q{constructor(){super(...arguments);this.face="wall";this.facing="north";this.powered=!1}get j(){return(new B.BoxGeometry(.375,.125,.25)).translate(0,-.4375,0)}get m(){const a=this.face,b=this.facing;return"ceiling"===a?Fb:"floor"===a?Eb:"north"===b?Gb:"east"===b?Jb:"south"===b?Hb:"west"===b?Kb:(0,Aa)(b)}get o(){return(0,Cb)("#888")}};lc=(0,u)([R],lc);const mc=new Map,nc={"default":Q,"minecraft:amethyst_cluster":Yb,"minecraft:chest":Zb,"minecraft:comparator":$b,"minecraft:hopper":ac,"minecraft:large_amethyst_bud":Xb,"minecraft:medium_amethyst_bud":Wb,"minecraft:observer":bc,"minecraft:piston_head":dc,"minecraft:piston":cc,"minecraft:redstone_lamp":ec,"minecraft:redstone_wire":gc,"minecraft:repeater":hc,"minecraft:scaffolding":ic,"minecraft:slime_block":jc,"minecraft:small_amethyst_bud":Vb,"minecraft:sticky_piston":kc,"minecraft:stone_button":lc,
"minecraft:calcite":(0,Tb)("#aaa"),"minecraft:smooth_basalt":(0,Tb)("#333"),"minecraft:amethyst_block":(0,Tb)("#7457a5"),"minecraft:budding_amethyst":(0,Tb)("#ab8ae3"),"minecraft:stone":(0,Tb)("#777"),"minecraft:dirt":(0,Tb)("#61452e"),"minecraft:diorite":(0,Tb)("#aaa"),"minecraft:andesite":(0,Tb)("#777"),"minecraft:granite":(0,Tb)("#7f5646"),"minecraft:deepslate":(0,Tb)("#333"),"minecraft:gravel":(0,Tb)("#888"),"minecraft:iron_block":(0,Tb)("#aaa"),"minecraft:water":(0,Tb)("#00f",.1),"minecraft:note_block":(0,
S)(14),"minecraft:redstone_block":(0,S)(17),"minecraft:obsidian":(0,S)(19),"minecraft:coal_ore":(0,S)(64),"minecraft:copper_ore":(0,S)(66),"minecraft:lapis_ore":(0,S)(68),"minecraft:iron_ore":(0,S)(70),"minecraft:redstone_ore":(0,S)(72),"minecraft:diamond_ore":(0,S)(74),"minecraft:gold_ore":(0,S)(76),"minecraft:emerald_ore":(0,S)(78),"minecraft:deepslate_coal_ore":(0,S)(65),"minecraft:deepslate_copper_ore":(0,S)(67),"minecraft:deepslate_lapis_ore":(0,S)(69),"minecraft:deepslate_iron_ore":(0,S)(71),
"minecraft:deepslate_redstone_ore":(0,S)(73),"minecraft:deepslate_diamond_ore":(0,S)(75),"minecraft:deepslate_gold_ore":(0,S)(77),"minecraft:deepslate_emerald_ore":(0,S)(79),"minecraft:smooth_stone":(0,S)(80)};function oc(a){var b=mc.get(a);if(null!=b)return b;b=(0,lb)(a);b=new (nc[b.Name]??nc["default"])(b);mc.set(a,b);return b};const pc=(new B.TextureLoader).load("data:image/png;base64,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");
pc.minFilter=B.NearestFilter;pc.magFilter=B.NearestFilter;function qc(a){a.u||(a.u=!0,requestAnimationFrame(()=>a.render()))}function Z(a,b,c,d,e){const f=(0,t)(b,c,d),g=(0,oc)(e);a.m[f]!==e&&(a.m[f]=e,a.J[f]&&a.o.remove((0,hb)(a.J[f])),a.J[f]=void 0,"minecraft:air"!==e&&"minecraft:cave_air"!==e&&(e=new B.Mesh(g.j,g.o),e.position.set(b,c,d),e.setRotationFromEuler(g.m),a.J[f]=e,a.o.add(e)))}function rc(a,b,c,d){return a.m[(0,t)(b,c,d)]??"minecraft:air"}
function sc(a){var b=a.H.domElement;const c=b.clientWidth,d=b.clientHeight;(b=b.width!==c||b.height!==d)&&a.H.setSize(c,d,!1);return b}
var tc=class extends EventTarget{constructor(a){super();this.m={};this.J={};this.u=!1;this.M=!0;const b="string"===typeof a?(0,w)(document.querySelector(a),HTMLCanvasElement):a;this.T=new IntersectionObserver(d=>{for(const e of d)this.M=e.isIntersecting});this.T.observe(b);this.H=new B.WebGLRenderer({canvas:b,antialias:!0});this.B=new B.Vector2;b.addEventListener("mousemove",d=>{const e=b.getBoundingClientRect();this.B.x=(d.clientX-e.left)/b.clientWidth*2-1;this.B.y=2*-((d.clientY-e.top)/b.clientHeight)+
1;qc(this)});this.N=new B.Raycaster;a=new B.Scene;a.background=new B.Color("#fff");this.L=new B.DirectionalLight(7829367);this.L.position.set(0,1,0);a.add(this.L);this.G=new B.DirectionalLight(4473924);this.G.position.set(1,0,0);a.add(this.G);this.C=new B.DirectionalLight(4473924);this.C.position.set(-1,0,0);a.add(this.C);this.I=new B.DirectionalLight(2236962);this.I.position.set(0,0,1);a.add(this.I);this.D=new B.DirectionalLight(2236962);this.D.position.set(0,0,-1);a.add(this.D);this.S=new B.AmbientLight(8947848);
a.add(this.S);this.o=a;this.camera=new B.PerspectiveCamera(75,1,.1,1E3);a=new sb.OrbitControls(this.camera,b);a.update();a.minDistance=1;a.maxDistance=100;this.j=a;const c=()=>{const d=this.H.domElement,e=d.clientWidth,f=d.clientHeight;if(d.width!==e||d.height!==f)this.H.setSize(e,f,!1),this.camera.aspect=e/f,this.camera.updateProjectionMatrix(),qc(this)};a.addEventListener("change",()=>qc(this));window.addEventListener("resize",()=>c());document.querySelector(".main-panel")?.addEventListener("sl-reposition",
()=>c());document.querySelector(".secondary-panel")?.addEventListener("sl-reposition",()=>c());this.render()}render(){if(this.M){this.u=!1;if(sc(this)){var a=this.H.domElement;this.camera.aspect=a.clientWidth/a.clientHeight;this.camera.updateProjectionMatrix()}this.N.setFromCamera(this.B,this.camera);a=this.N.intersectObjects(this.o.children);for(var b of a){a=b.object.position.x|0;const c=b.object.position.y|0;b=b.object.position.z|0;this.dispatchEvent(new CustomEvent("hover",{detail:{x:a,y:c,z:b,
O:rc(this,a,c,b)}}));break}this.j.update();this.H.render(this.o,this.camera)}else requestAnimationFrame(()=>this.render())}};const uc=new Map;
async function vc(){var a=await Promise.all(Array.from(document.querySelectorAll('object[type="application/vnd.litematica+nbt"]')).map(async d=>{var e=d.getAttribute("data");if(null==e)throw Error("embedded litematic must have a [data] attribute.");e=await fetch(e);return e.ok?{P:d,data:await e.arrayBuffer()}:{P:d,data:null}}));for(const {P:d,data:e}of a)if(e){a=(0,w)(d.querySelector("canvas"),HTMLCanvasElement);const f=new tc(a);f.j.autoRotate="true"===d.dataset.autorotate;a.addEventListener("dblclick",()=>
{console.log(f.j.target,f.camera.position)});a=await (0,Ma)(new Uint8Array(e));a=new pb(a);for(var b=0;b<a.height;b++)for(var c=0;c<a.length;c++)for(let g=0;g<a.width;g++){const h=a.F(g,b,c);Z(f,g,b,c,h)}uc.set(d,{H:f,W:a});c=d.dataset.camera;b=d.dataset.target;null!=c&&null!=b?(a=(0,ib)(c),b=(0,ib)(b),f.camera.position.set(a[0],a[1],a[2]),f.j.target.set(b[0],b[1],b[2])):f.j.target.set(a.width/2,a.height/2,a.length/2)}for(const d of document.querySelectorAll(".revealer")){const e=()=>{var f=(0,hb)(d.getAttribute("for"));
f=(0,hb)(document.getElementById(f));const {H:g,W:h}=(0,hb)(uc.get(f));f=Math.round(h.height*(1-Number(d.value)/100));console.log(f);for(let l=0;l<h.height;l++)for(let q=0;q<h.length;q++)for(let z=0;z<h.width;z++){var k=h.F(z,l,q);if("minecraft:smooth_basalt"===k||"minecraft:calcite"===k||"minecraft:amethyst_block"===k){k=z;var x=l,v=q;if(k=g.J[(0,t)(k,x,v)])k.visible=l<f}}};d.addEventListener("sl-change",()=>{e()});e()}};
//# sourceMappingURL=renderer.js.map
