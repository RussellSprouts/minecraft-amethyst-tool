'use strict';(0,ub)("general");(0,yc)();(0,function(){for(const a of document.getElementsByClassName("file-select")){const b=(0,kb)(a.querySelector("span"),HTMLSpanElement),c=(0,kb)(a.querySelector("input"),HTMLInputElement),d=b.textContent;c.addEventListener("change",()=>{c.files&&0!==c.files.length?b.textContent=1===c.files.length?"1 file selected.":`${c.files.length} files selected.`:b.textContent=d})}})();const fd=[{x:0,z:0}];
function gd(a){return(a=a.match(/.*r\.(-?[0-9]+)\.(-?[0-9]+)\.mca$/))?{x:parseInt(a[1]),z:parseInt(a[2])}:{x:Infinity,z:Infinity}}const hd=(0,w)("#afk-spot-log"),id=(0,w)("#region-files",HTMLInputElement);function jd(a){return"string"===typeof a?a.replace(/^.*\/([^/]+)$/,"$1"):a.name}
async function kd(a){function b(...u){console.log(...u);u=u.map(x=>x?x.toString():"");hd.textContent=u.join("\t")+"\n"}function c(u,x,K,l){const m=(0,r)(u,0,x);e[m]||(e[m]={});e[m][l]=(e[m][l]??0)+K;e[m][l]>(d[m]??-1)&&(d[m]=e[m][l],"purple"!==Ec(v,u,x)&&(K=Math.floor(256*(1-e[m][l]/1E3)),K=0>K?"#000000":16>K?`0${K.toString(16)}`:K.toString(16),Dc(v,u,x,`#${K}${K}${K}`)));e[m][l]>q&&(q=e[m][l],z=l,console.log(`New best ${m} ${q} ${z}`))}const d={},e={},f={};var g=(0,w)("#step-1-response"),h=(0,w)("#step-1-response-balloon"),
k=(0,w)("#step-2");g.classList.add("hidden");k.classList.add("hidden");hd.textContent="";if(0!==a.length){h.textContent=`Selected ${a.length} files.`;g.classList.remove("hidden");k.classList.remove("hidden");var y=(0,w)("#map-label"),v=new Fc("#map");v.addEventListener("mousemove",(u,x)=>{const K=e[(0,r)(u,0,x)]??{};let l=-1,m=(0,r)(0,0,0);for(const [L,M]of Object.entries(K))M>l&&(l=M,m=L);const [p,,T]=(0,C)(m);y.textContent=`x:${p} z:${T} afk:${l} chunk:${f[(0,r)(u,0,x)]??"0"}`});a.sort((u,x)=>{u=
gd(jd(u));x=gd(jd(x));return u.x*u.x+u.z*u.z-(x.x*x.x+x.z*x.z)});var q=-1,z=(0,r)(0,0,0);b(`Processing ${a.length} region files...`);g=0;for(const u of a){const [x,,K]=(0,C)(z);b(`Processing ${jd(u)} (${Math.floor(g/a.length*100)}% overall)\nAFK at x:${x} z:${K} to have ${q} budding amethyst in range.`);g++;try{if(0===("string"===typeof u?NaN:u.size)){b("  (Skipping empty region)");continue}jd(u).endsWith(".mca")||b("  (Skipping unknown file type)");const l=await (0,jb)(u).promise;Object.assign(f,
l);for(const [m,p]of Object.entries(l)){const [T,,L]=(0,C)(m);0<p?Dc(v,T,L,"purple"):Ec(v,T,L)===v.C&&Dc(v,T,L,"aliceblue");v.u=!0;if(0<p)for(h=-8;8>=h;h++)for(k=-8;8>=k;k++)for(const {x:M,z:X}of fd){const U=k+.5+M,aa=h+.5+X;64>U*U+aa*aa&&c(T+k,L+h,p,(0,r)(16*(T+k+M),0,16*(L+h+X)))}}}catch(l){b("Error:",l),console.log(l)}}var [G,,B]=(0,C)(z);b(`Processing finished (100% overall).\nAFK at x:${G.toFixed(2)} z:${B.toFixed(2)} to have ${q} budding amethyst in range.`)}}
id.addEventListener("change",async()=>{kd(Array.from(id.files??[]))});(0,w)("#sample").addEventListener("click",()=>{kd(["../samples/r.0.0.mca","../samples/r.0.-1.mca","../samples/r.-1.-1.mca","../samples/r.-1.0.mca"])});
//# sourceMappingURL=geode.js.map
