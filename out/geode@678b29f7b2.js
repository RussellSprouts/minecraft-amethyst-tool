'use strict';function Ad(a){return"string"===typeof a?NaN:a.size}function Bd(a){a.sort((b,c)=>{b=$a(ab(b));c=$a(ab(c));return b.x*b.x+b.z*b.z-(c.x*c.x+c.z*c.z)});return a}(0,Nb)();(0,Tc)();(0,Uc)();console.log("Debugging information:");const Cd=[{x:0,z:0}],Dd=(0,E)("#afk-spot-log"),Ed=(0,E)("#region-files",HTMLInputElement);
async function Fd(a){function b(...z){console.log(...z);z=z.map(I=>I?I.toString():"");Dd.textContent=z.join("\t")+"\n"}function c(z,I,y,k){const m=(0,v)(z,0,I);e[m]||(e[m]={});e[m][k]=(e[m][k]??0)+y;e[m][k]>(d[m]??-1)&&(d[m]=e[m][k],"purple"!==ad(r,z,I)&&(y=Math.floor(256*(1-e[m][k]/1E3)),y=0>y?"#000000":16>y?`0${y.toString(16)}`:y.toString(16),$c(r,z,I,`#${y}${y}${y}`)));e[m][k]>w&&(w=e[m][k],H=k,console.log(`New best ${m} ${w} ${H}`))}const d={},e={},f={};var g=(0,E)("#step-1-response"),h=(0,E)("#step-1-response-balloon"),
l=(0,E)("#step-2");g.classList.add("hidden");l.classList.add("hidden");Dd.textContent="";if(0!==a.length){h.textContent=`Selected ${a.length} files.`;g.classList.remove("hidden");l.classList.remove("hidden");var p=(0,E)("#map-label"),r=new bd("#map");r.addEventListener("mousemove",(z,I)=>{const y=e[(0,v)(z,0,I)]??{};let k=-1,m=(0,v)(0,0,0);for(const [u,G]of Object.entries(y))G>k&&(k=G,m=u);const [n,,B]=(0,La)(m);p.textContent=`x:${n} z:${B} afk:${k} chunk:${f[(0,v)(z,0,I)]??"0"}`});(0,Bd)(a);var w=
-1,H=(0,v)(0,0,0);b(`Processing ${a.length} region files...`);g=0;for(const z of a){const [I,,y]=(0,La)(H);b(`Processing ${(0,ab)(z)} (${Math.floor(g/a.length*100)}% overall)\nAFK at x:${I} z:${y} to have ${w} budding amethyst in range.`);g++;try{if(0===(0,Ad)(z)){b("  (Skipping empty region)");continue}(0,ab)(z).endsWith(".mca")||b("  (Skipping unknown file type)");const k=await (0,sb)(z).promise;Object.assign(f,k);for(const [m,n]of Object.entries(k)){const [B,,u]=(0,La)(m);0<n?$c(r,B,u,"purple"):
ad(r,B,u)===r.C&&$c(r,B,u,"aliceblue");r.o=!0;if(0<n)for(h=-8;8>=h;h++)for(l=-8;8>=l;l++)for(const {x:G,z:S}of Cd){const X=l+.5+G,U=h+.5+S;64>X*X+U*U&&c(B+l,u+h,n,(0,v)(16*(B+l+G),0,16*(u+h+S)))}}}catch(k){b("Error:",k),console.log(k)}}var [J,,C]=(0,La)(H);$c(r,Math.floor(J/16),Math.floor(C/16),"gold");b(`Processing finished (100% overall).\nAFK at x:${J.toFixed(2)} z:${C.toFixed(2)} to have ${w} budding amethyst in range.`)}}Ed.addEventListener("change",async()=>{Fd(Array.from(Ed.files??[]))});
(0,E)("#sample").addEventListener("click",()=>{Fd(["../samples/r.0.0.mca","../samples/r.0.-1.mca","../samples/r.-1.-1.mca","../samples/r.-1.0.mca"])});
//# sourceMappingURL=geode.js.map
