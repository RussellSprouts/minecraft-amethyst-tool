'use strict';function w(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f}function kb(a,b){if(!(a instanceof b))throw Error(`Expected element ${a} to be ${b}`);return a}
function lb(a){if(null==a)throw Error("Got null value.");return a}function y(a,b){a=document.querySelector(a);return b?kb(a,b):kb(a,HTMLElement)}function G(a){return a.split(":").map(b=>+b)}
var mb=class{constructor(){this.segments={};this.G=!1;this.D=!0;this.C=this.o=this.B=this.m=this.u=this.j=0}get width(){return this.u-this.j+1}get height(){return this.B-this.m+1}get length(){return this.C-this.o+1}get(a,b,c){var d=Math.floor(a/16);const e=Math.floor(b/16),f=Math.floor(c/16);a=(a%16+16)%16;b=(b%16+16)%16;c=(c%16+16)%16;d=(0,t)(d,e,f);return null==this.segments[d]?0:this.segments[d][a+16*(c+16*b)]}set(a,b,c,d){255<d&&(this.G=!0);this.D?(this.u=this.j=a,this.B=this.m=b,this.C=this.o=
c,this.D=!1):(this.u=Math.max(this.u,a),this.B=Math.max(this.B,b),this.C=Math.max(this.C,c),this.j=Math.min(this.j,a),this.m=Math.min(this.m,b),this.o=Math.min(this.o,c));var e=Math.floor(a/16);const f=Math.floor(b/16),g=Math.floor(c/16);a=(a%16+16)%16;b=(b%16+16)%16;c=(c%16+16)%16;e=(0,t)(e,f,g);null==this.segments[e]?this.segments[e]=255<d?new Uint16Array(4096):new Uint8Array(4096):255<d&&this.segments[e]instanceof Uint8Array&&(this.segments[e]=Uint16Array.from(this.segments[e]));this.segments[e][a+
16*(c+16*b)]=d}},nb={Version:"int",MinecraftDataVersion:"int",Metadata:{Name:"string",Author:"string",Description:"string",EnclosingSize:{x:"int",y:"int",z:"int"},TimeCreated:"long",TimeModified:"long",TotalBlocks:"int",TotalVolume:"int",RegionCount:"int"},Regions:{"*":{BlockStatePalette:[{Name:"string",Properties:{"*":"string"}}],BlockStates:"longArray",Position:{x:"int",y:"int",z:"int"},Size:{x:"int",y:"int",z:"int"},Entities:[{"*":"*"}],TileEntities:[{"*":"*"}],PendingBlockTicks:[{"*":"*"}]}}};
function ob(a){const [b,c]=a.split("[");a={};if(c)for(const d of c.slice(0,-1).split(",")){const [e,f]=d.split("=");a[e]=f}return{Name:b,Properties:a}}function pb(a,b){if(void 0!==a.m[b])return a.m[b];a.j.push(b);a.m[b]=a.j.length-1;return a.m[b]}function qb(a,b){return a.j[b]??"minecraft:air"}
var rb=class{constructor(){this.m={"minecraft:air":0};this.j=["minecraft:air"]}},sb=class{constructor(a){this.u=new Ja(nb);this.o=new rb;this.j=new mb;this.m=this.u.parse(a);a=Object.keys(this.m.Regions);for(const d of a){var b=this.m.Regions[d];a=b.BlockStatePalette.map(Oa);var c=Math.max(Math.ceil(Math.log2(a.length)),2);const e=b.Size.x,f=b.Size.y,g=b.Size.z,h=b.Position.x+(0>e?e+1:0),l=b.Position.y+(0>f?f+1:0),v=b.Position.z+(0>g?g+1:0);b=(0,Ka)(b.BlockStates,c,Math.abs(e*f*g),!0);for(let u=0,
r=0;u<Math.abs(f);u++)for(c=0;c<Math.abs(g);c++)for(let D=0;D<Math.abs(e);D++,r++){const K=pb(this.o,a[b[r]]);this.j.set(h+D,l+u,v+c,K)}}}F(a,b,c){return 0>a||a>=this.width||0>b||b>=this.height||0>c||c>=this.length?"minecraft:air":qb(this.o,this.j.get(this.j.j+a,this.j.m+b,this.j.o+c))}get version(){return this.m.Version}get name(){return this.m.Metadata.Name}get description(){return this.m.Metadata.Description}get width(){return this.j.width}get height(){return this.j.height}get length(){return this.j.length}};
function tb(a){a.onmessage=b=>{if("progress"===b.data.event){var c=Ta.get(b.data.id);if(!c)throw Error(`Missing progressHandler for ${b.data.event}:${b.data.id}`);c(b.data.value)}else{c=Sa.get(b.data.id);if(!c)throw Error(`Missing resolver for ${b.data.event}:${b.data.id}`);Sa.delete(b.data.id);Ta.delete(b.data.id);c(b.data.value)}}}
function ub(){var a=document.querySelectorAll('script[type="application/russellsprouts-worker"]');for(const c of a){var b=(0,kb)(c,HTMLScriptElement);a=(0,lb)(b.dataset.name);b=(0,lb)(b.getAttribute("src"));console.log("Creating named worker",a,b);b=new Worker(b);b.postMessage({event:"init-worker",value:{name:a}});for(const [d,e]of Ra.entries()){const f=new MessageChannel;b.postMessage({event:"register-worker",value:{name:d}},[f.port1]);e.postMessage({event:"register-worker",value:{name:a}},[f.port2])}Ra.set(a,
b);tb(b)}}var N=THREE;var vb=OrbitControls;const wb=[{A:[-.5,-.5,.5],v:[0,0,1],uv:[0,0]},{A:[.5,-.5,.5],v:[0,0,1],uv:[1,0]},{A:[-.5,.5,.5],v:[0,0,1],uv:[0,1]},{A:[.5,.5,.5],v:[0,0,1],uv:[1,1]},{A:[.5,-.5,.5],v:[1,0,0],uv:[0,0]},{A:[.5,-.5,-.5],v:[1,0,0],uv:[1,0]},{A:[.5,.5,.5],v:[1,0,0],uv:[0,1]},{A:[.5,.5,-.5],v:[1,0,0],uv:[1,1]},{A:[.5,-.5,-.5],v:[0,0,-1],uv:[0,0]},{A:[-.5,-.5,-.5],v:[0,0,-1],uv:[1,0]},{A:[.5,.5,-.5],v:[0,0,-1],uv:[0,1]},{A:[-.5,.5,-.5],v:[0,0,-1],uv:[1,1]},{A:[-.5,-.5,-.5],v:[-1,0,0],uv:[0,0]},{A:[-.5,-.5,.5],v:[-1,0,0],
uv:[1,0]},{A:[-.5,.5,-.5],v:[-1,0,0],uv:[0,1]},{A:[-.5,.5,.5],v:[-1,0,0],uv:[1,1]},{A:[.5,.5,-.5],v:[0,1,0],uv:[0,0]},{A:[-.5,.5,-.5],v:[0,1,0],uv:[1,0]},{A:[.5,.5,.5],v:[0,1,0],uv:[0,1]},{A:[-.5,.5,.5],v:[0,1,0],uv:[1,1]},{A:[.5,-.5,.5],v:[0,-1,0],uv:[0,0]},{A:[-.5,-.5,.5],v:[0,-1,0],uv:[1,0]},{A:[.5,-.5,-.5],v:[0,-1,0],uv:[0,1]},{A:[-.5,-.5,-.5],v:[0,-1,0],uv:[1,1]}],xb=new Uint16Array([0,1,2,2,1,3,4,5,6,6,5,7,8,9,10,10,9,11,12,13,14,14,13,15,16,17,18,18,17,19,20,21,22,22,21,23]),yb=[],zb=[],Ab=
[];for(const a of wb)yb.push(...a.A),zb.push(...a.v),Ab.push(...a.uv);const Bb=new Float32Array(yb),Cb=new Float32Array(zb),Db=new Float32Array(Ab);
function O(a,b,c,d,e,f,g=16,h=16,l=16,v=0,u=0,r=0,D=0){a=[a,b,c,d,e,f];b=new N.BufferGeometry;if(16===g&&16===h&&16===l&&0===D)b.setAttribute("position",new N.BufferAttribute(Bb,3));else{c=new Float32Array(Bb);for(d=0;d<c.length;d+=3)c[d]=(v-Cb[d]*D+(0<c[d]?g:0))/16-.5,c[d+1]=(u-Cb[d+1]*D+(0<c[d+1]?h:0))/16-.5,c[d+2]=(r-Cb[d+2]*D+(0<c[d+2]?l:0))/16-.5;b.setAttribute("position",new N.BufferAttribute(c,3))}b.setAttribute("normal",new N.BufferAttribute(Cb,3));g=[[g,h],[l,h],[g,h],[l,h],[g,l],[g,l]];
h=new Float32Array(Db);for(l=0;l<h.length;l+=2){u=Math.floor(l/8);v=a[u];const [K,A]=g[u];u=K/16;r=1-(17*v+A)/1529;v=1-17*v/1529;h[l]=0!==h[l]?u:0;h[l+1]=0!==h[l+1]?v:r}b.setAttribute("uv",new N.BufferAttribute(h,2));b.setIndex(new N.BufferAttribute(xb,1));return b}function Eb(a){return O(a,a,a,a,a,a)}function Fb(a,b=1){return new N.MeshStandardMaterial({color:a,opacity:b,transparent:1!==b})}var Gb=(new N.TextureLoader).load("data:image/png;base64,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");
Gb.minFilter=N.NearestFilter;Gb.magFilter=N.NearestFilter;var Hb=new N.Euler(0,0,0),Ib=new N.Euler(Math.PI,0,0),Jb=new N.Euler(-Math.PI/2,0,0),Kb=new N.Euler(-Math.PI/2,0,Math.PI),Lb=new N.Euler(-Math.PI/2,0,-Math.PI/2),Nb=new N.Euler(-Math.PI/2,0,Math.PI/2),Ob=new N.Euler(0,Math.PI/2,0),Pb=new N.Euler(0,Math.PI,0),Qb=new N.Euler(0,-Math.PI/2,0),Rb=new N.MeshStandardMaterial({map:Gb}),Sb=new N.MeshStandardMaterial({map:Gb,transparent:!0,alphaTest:.5});const Tb=Eb(39);var P=class{get j(){return Tb}get o(){return Rb}get m(){return Hb}};
function Q(a){const b=Object.getOwnPropertyDescriptors(a.prototype);for(const [c,d]of Object.entries(b))if(d.get){const e=d.get;Object.defineProperty(a.prototype,c,{get(){const f=e.call(this);Object.defineProperty(this,c,{value:f});return f}})}return class extends a{constructor(...c){super(c[0]);for(const [d,e]of Object.entries(c[0].Properties))void 0===this[d]&&console.warn("Missing default value for",c[0].Name,d),this[d]="number"===typeof this[d]?Number(e):"boolean"===typeof this[d]?"true"===e:
e}}}function Ub(a){return"north"===a.facing?Hb:"south"===a.facing?Pb:"east"===a.facing?Qb:"west"===a.facing?Ob:(0,Ba)(a.facing)}function Vb(a){return"up"===a.facing?Hb:"south"===a.facing?Kb:"east"===a.facing?Lb:"west"===a.facing?Nb:"down"===a.facing?Ib:"north"===a.facing?Jb:(0,Ba)(a.facing)}function W(a){let b=class extends P{get j(){return Eb(a)}};return b=(0,w)([Q],b)}function Wb(a,b){let c=class extends P{get o(){return Fb(a,b)}};return c=(0,w)([Q],c)};var Xb=class extends P{constructor(){super(...arguments);this.facing="north";this.waterlogged=!1;this.u=39}get j(){const a=this.u;return N.BufferGeometryUtils.mergeBufferGeometries([(0,O)(a,22,a,22,22,22,16,16,16,0,0,0,8),(0,O)(22,a,22,a,22,22,16,16,16,0,0,0,8)]).rotateY(Math.PI/4)}get m(){return(0,Vb)(this)}get o(){return Sb}};Xb=(0,w)([Q],Xb);var Yb=class extends Xb{constructor(){super(...arguments);this.u=35}};Yb=(0,w)([Q],Yb);var Zb=class extends Xb{constructor(){super(...arguments);this.u=36}};
Zb=(0,w)([Q],Zb);var $b=class extends Xb{constructor(){super(...arguments);this.u=37}};$b=(0,w)([Q],$b);var ac=class extends Xb{constructor(){super(...arguments);this.u=38}};ac=(0,w)([Q],ac);var bc=class extends P{constructor(){super(...arguments);this.facing="north";this.type="single";this.waterlogged=!1}get j(){const a=this.type;return"single"===a?N.BufferGeometryUtils.mergeBufferGeometries([(0,O)(81,81,83,81,82,82,14,14,14,1,0,1)]):"left"===a?(0,O)(85,22,87,81,89,89,15,14,14,1,0,1):"right"===a?(0,O)(88,81,84,22,86,86,15,14,14,0,0,1):(0,Ba)(a)}get m(){return(0,Ub)(this)}};bc=(0,w)([Q],bc);var cc=class extends P{constructor(){super(...arguments);this.facing="north";this.mode="compare";this.powered=!1}get j(){const a=this.mode,b=this.powered,c="subtract"===a?27:26,d="subtract"===a?30:29,e=b?27:26,f=b?30:29;return N.BufferGeometryUtils.mergeBufferGeometries([(0,O)(28,28,28,28,b?33:32,23,16,2,16),(0,O)(c,c,c,c,d,d,4,4,4,6,"subtract"===a?2:1,11,1),(0,O)(e,e,e,e,f,f,4,6,4,3,2,1,1),(0,O)(e,e,e,e,f,f,4,6,4,9,2,1,1)])}get m(){return(0,Ub)(this)}get o(){return Sb}};cc=(0,w)([Q],cc);var dc=class extends P{constructor(){super(...arguments);this.enabled=!0;this.facing="down"}get j(){const a="down"!==this.facing;return N.BufferGeometryUtils.mergeBufferGeometries([(0,O)(22,22,22,22,22,22,2,6,16,0,10,0),(0,O)(22,22,22,22,22,22,2,6,16,14,10,0),(0,O)(22,22,22,22,22,22,12,6,2,2,10,14),(0,O)(22,22,22,22,22,22,12,6,2,2,10,0),(0,O)(22,22,22,22,22,22,12,1,12,2,10,2),(0,O)(22,22,22,22,22,22,8,6,8,4,4,4),(0,O)(22,22,22,22,22,22,4,4,4,...(a?[6,4,0]:[6,0,6]))])}get o(){return(0,Fb)("#333")}get m(){return"down"===
this.facing?Hb:(0,Ub)(this)}};dc=(0,w)([Q],dc);var ec=class extends P{constructor(){super(...arguments);this.facing="south";this.powered=!1}get j(){return(0,O)(10,11,10,11,12,13)}get m(){return(0,Vb)(this)}};ec=(0,w)([Q],ec);var fc=class extends P{constructor(){super(...arguments);this.extended=!1;this.facing="north"}get j(){return this.extended?(0,O)(4,4,4,4,9,8,16,12,16):(0,O)(2,2,2,2,1,8)}get m(){return(0,Vb)(this)}};fc=(0,w)([Q],fc);var gc=class extends P{constructor(){super(...arguments);this.facing="north";this["short"]=!1;this.type="normal"}get j(){var a=this.type;const b="sticky"===a?5:6;a="sticky"===a?0:1;return N.BufferGeometryUtils.mergeBufferGeometries([(0,O)(b,b,b,b,a,a,16,4,16,0,12,0),(0,O)(7,7,7,7,22,22,4,16,4,6,-4,6)])}get m(){return(0,Vb)(this)}};gc=(0,w)([Q],gc);var hc=class extends P{constructor(){super(...arguments);this.lit=!1}get j(){return this.lit?(0,Eb)(16):(0,Eb)(15)}};hc=(0,w)([Q],hc);const ic={"":44,n:40,s:40,e:42,w:42,ns:40,ew:42,nw:48,ne:50,se:52,sw:54,nsw:56,"new":58,nse:60,sew:62,nsew:46};
var jc=class extends P{constructor(){super(...arguments);this.north=this.east="none";this.power=0;this.west=this.south="none"}get j(){const a=this.east,b=this.north,c=this.south,d=this.west,e=0===this.power?1:0;return(0,O)("up"===c?e+40:22,"up"===a?e+40:22,"up"===b?e+40:22,"up"===d?e+40:22,22,ic[("none"===b?"":"n")+("none"===c?"":"s")+("none"===a?"":"e")+("none"===d?"":"w")]+e,16,16,16,0,0,0,.01)}get o(){return new N.MeshStandardMaterial({map:Gb,transparent:!0,side:N.DoubleSide,alphaTest:.5})}};
jc=(0,w)([Q],jc);var kc=class extends P{constructor(){super(...arguments);this.delay=1;this.facing="north";this.powered=this.locked=!1}get j(){const a=this.powered,b=this.delay,c=this.locked,d=a?27:26,e=a?30:29;return N.BufferGeometryUtils.mergeBufferGeometries([(0,O)(28,28,28,28,a?25:24,23,16,2,16),c?(0,O)(31,31,31,31,31,31,12,2,2,2,2,10-2*b):(0,O)(d,d,d,d,e,e,4,6,4,6,2,9-2*b,1),(0,O)(d,d,d,d,e,e,4,6,4,6,2,11,1)])}get m(){return(0,Ub)(this)}get o(){return Sb}};kc=(0,w)([Q],kc);var lc=class extends P{constructor(){super(...arguments);this.bottom=!1;this.distance=7;this.waterlogged=!1}get j(){return(0,O)(21,21,21,21,20,this.bottom?20:22)}get o(){return new N.MeshStandardMaterial({map:Gb,transparent:!0,side:N.DoubleSide,alphaTest:.5})}};lc=(0,w)([Q],lc);var mc=class extends P{get j(){return(0,Eb)(18)}get o(){return new N.MeshStandardMaterial({map:Gb,transparent:!0,alphaTest:.5,opacity:.75})}};mc=(0,w)([Q],mc);var nc=class extends P{constructor(){super(...arguments);this.extended=!1;this.facing="north"}get j(){return this.extended?(0,O)(4,4,4,4,9,8,16,12,16):(0,O)(3,3,3,3,0,8)}get m(){return(0,Vb)(this)}};nc=(0,w)([Q],nc);var oc=class extends P{constructor(){super(...arguments);this.face="wall";this.facing="north";this.powered=!1}get j(){return(new N.BoxGeometry(.375,.125,.25)).translate(0,-.4375,0)}get m(){const a=this.face,b=this.facing;return"ceiling"===a?Ib:"floor"===a?Hb:"north"===b?Jb:"east"===b?Lb:"south"===b?Kb:"west"===b?Nb:(0,Ba)(b)}get o(){return(0,Fb)("#888")}};oc=(0,w)([Q],oc);const pc=new Map,qc={"default":P,"minecraft:amethyst_cluster":ac,"minecraft:chest":bc,"minecraft:comparator":cc,"minecraft:hopper":dc,"minecraft:large_amethyst_bud":$b,"minecraft:medium_amethyst_bud":Zb,"minecraft:observer":ec,"minecraft:piston_head":gc,"minecraft:piston":fc,"minecraft:redstone_lamp":hc,"minecraft:redstone_wire":jc,"minecraft:repeater":kc,"minecraft:scaffolding":lc,"minecraft:slime_block":mc,"minecraft:small_amethyst_bud":Yb,"minecraft:sticky_piston":nc,"minecraft:stone_button":oc,
"minecraft:calcite":(0,Wb)("#aaa"),"minecraft:smooth_basalt":(0,Wb)("#333"),"minecraft:amethyst_block":(0,Wb)("#7457a5"),"minecraft:budding_amethyst":(0,Wb)("#ab8ae3"),"minecraft:stone":(0,Wb)("#777"),"minecraft:dirt":(0,Wb)("#61452e"),"minecraft:diorite":(0,Wb)("#aaa"),"minecraft:andesite":(0,Wb)("#777"),"minecraft:granite":(0,Wb)("#7f5646"),"minecraft:deepslate":(0,Wb)("#333"),"minecraft:gravel":(0,Wb)("#888"),"minecraft:iron_block":(0,Wb)("#aaa"),"minecraft:water":(0,Wb)("#00f",.1),"minecraft:note_block":(0,
W)(14),"minecraft:redstone_block":(0,W)(17),"minecraft:obsidian":(0,W)(19),"minecraft:coal_ore":(0,W)(64),"minecraft:copper_ore":(0,W)(66),"minecraft:lapis_ore":(0,W)(68),"minecraft:iron_ore":(0,W)(70),"minecraft:redstone_ore":(0,W)(72),"minecraft:diamond_ore":(0,W)(74),"minecraft:gold_ore":(0,W)(76),"minecraft:emerald_ore":(0,W)(78),"minecraft:deepslate_coal_ore":(0,W)(65),"minecraft:deepslate_copper_ore":(0,W)(67),"minecraft:deepslate_lapis_ore":(0,W)(69),"minecraft:deepslate_iron_ore":(0,W)(71),
"minecraft:deepslate_redstone_ore":(0,W)(73),"minecraft:deepslate_diamond_ore":(0,W)(75),"minecraft:deepslate_gold_ore":(0,W)(77),"minecraft:deepslate_emerald_ore":(0,W)(79),"minecraft:smooth_stone":(0,W)(80)};function rc(a){var b=pc.get(a);if(null!=b)return b;b=(0,ob)(a);b=new (qc[b.Name]??qc["default"])(b);pc.set(a,b);return b};const sc=(new N.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAX5CAMAAABLXmq+AAAAulBMVEWynV2ygFh0V6UAAAD/9Lfe1fDP1dbMzMzHypCqzbqpysPRpr7GtoDHvDx521+qqqqkpKTAmFuynV1oulK0kFppqWE0v2mygFihc8C2fgipdy0WpK2FZcl3d3eObluxWj91clKPZjv/NgD/AP90V6V3YD2KVS5fX192TjfdHwgIeVAWeSEVeB6YHAgAYRIzMzMwMDA4LiKTBQVoDQ01IREfIxshIB4jGjRmAAAoFQ4SAK0WFhsICg8FAggRuSFRAAAABHRSTlMAAAAAs5NmmgAAB2dJREFUeNrtmA1/0zYQxrVRyqBkC2MEZ/WWwly8pKODAiUw9v2/FvcavVwdp4mTyGmvv0q6v+8eyRdFduuOj8/RFp07Pn6Btujc+W+Rnbvz2AC8iAxAawrLq9G0YQaAzWexKTrLonPm9h8kZiKMRvs6TER7iqmHAZvPYlO2VKB20XeJuXd1ZDmDxGyBWr5iBty5Ah30za0Fut9BRvSgwG3PoDtYoOPj5eAcjv8uQD+mPagzqOeHNOsFgJpNAVluBQqvEwhihjcDJOo3ACDiNwAi5DcBJuA3Ah4MOy7Qu2seX8P40ME2vmI25TqymyKGkRkgKUR9yvU1+twb0CzKMjbCgq0WCHBSoLrm3kaYWRTM5y0AFFjEiLZ/Lt2cQZ8Sc5/+jozAR/+DAPuP+tsQ8XERk5mGNwKJ2QJ9SQzBGzBuGbwRgIbgjQIyBdB+CYE2CjScgUwjkxhgUoyomdYuzC7d3lxiqxXoGRi3DJ4JQEPwTAGZAmi/hEAbBRrOQKaRSQwwKUbUTGsWZpdub669QG8Tc2+nkR06SMwW6Hli7vnPkR06SMwW6H+1z9w4aD5/9j4A8dQkpQWQiia6UIEA+VYDcnTayF86rUY5GAgINXyYF/UaycpsgX4Fe6U/MLYA3MAYvFwYIAe/L3/Qn8wi4qUn92aBLZBNCUyA84be06chAM9EdA92tY5s/svSH1An5uphZIcOEtttgeo6BvV8Xi8FNYJ6CagZ1I2gVlAb0IcCTaf1UlAjqJeAmkHdCGoFtQFrFsiC+bwNvHrVDrI4PzoB02kMpkdHUwPSlDtUoNZNl81KswHzuQF5LCwXcHRkQB4Ly+U96P4rtr/H/KNHdSMQH0gTYJ9II6jnYnUKevEetIMCTcVqA9YsUHVSFCdFWVVlgaPKgQND3zi9qGEIiKBPQAfUUYoQ8QtXChG/dJUSGRhgUoyomdYszCzd3Jy5/Wy+2V2CkwD8CFaVJ9Aq4JpVlYKqlPJUC1DgdahSjjfXDooEwM15AGME8EuAnKI8KZEJAB+qAZ0vEFulYGFZ3m0ZAfpoQ1AVAcDgqsSPujwhUAIBUJUwIFDBoCrJrxhgfElJlRYIyeYFKhJQPCwViA/3IkD9AokC+lJXISjRj0DpwUPMZYC5D10BRAD6co4hAN+fYwTk2HqAhAH6VCB0C67SejvoL7H/xPYFdKAX9gSaNsxrsHuw5Bv1Aewe7PGQfp3YGiC7x2un4ENia4Bs7qUrYL/Zr8k2AEqyvNtW0H6wfSDbACjJ4MPuDHR3Bh32U6yDM2g3K933e5DayiCXp9iuXjfUVga5PMV2cwatAXJ5aO3mDFoTZPmI7gpsuoNy+Vtsa2DTHXRX/hZb+6GVy3vQ1sCmT7H796Ce7KD+vAcd6A7q/f+D+vO32P2bdJ7vQf15kz7Q96De/z+oP/+T3vkO+iMxAd++faMWgPqMACBm5FOsRqjjeMREIrwgAyRG41ZARZNpZR3RzTVq2AL9m5gAmIFaBVwgjkDMyKdYjVDH8YiJRHhBBkiMxq2AiibTyjqim2vUWGkHzWYynkykyJ4pmJ1NJmcBAHfVD/vsLAQzsAkA0hQyATGHV5QEC7OiEw90ZYIcevg7Y10/7WY7aDaT8WQiRfZMARUoAOCu+mGfnYWACsRgxoJUIABwQUmwMCs6iQEVSABrQoFY10+70Q6y4CsYO9g7HsG4MUViqVHwFc0D6NUUiKxGoGmaTkuSIuNkqHE6bRTBjsYp2GwHWYBrZAd7xyMYN6ZILDUK6E49gF5NgchqBJqm6bQkKTJOhhqn00YR7Gicgo520J9gBKBXghHk2xTAYATIY8MBAkHLNh1fFRHn9SJRO61yjfBTO+ahKJOOdhCqEoBeCUawb1NoVQTIY8MBAkHLNh1fFRHn9SJRO61yjfBTO+aJaCdnUDu4uroKwRWbAiHcryQqgqoEgHxFqy7sykxLLlsnT7FVAawjBFIgBUK4X0lUBFUJAPmKVl3YlZmWXJPS9Q46FefJKQIdN6bodQ1yNAIDJQI2RSKl8xGYZdbhwSKKgHo0l07LaMs76FScJ6cIdNyYItepUUCLBiUCNkUipfMRmGXW4cEiKgRcIJ2WUbc7aJwAz8ZjBePBWFonPoHBAFLE/0l1fEQsKi5q4GUCGkFSZh2yiIEHMpVokAimUgRf4RDWiFQHa++gcQI8G48VQGmkdeITGAwkhQrkNZjEQOdBDbxMQCNQquHDhjJ4IFOJBolgKkXwFQ5hjUh10NUZ9HiEA+wFjC4ZcN+gMRpdhOBy9Pjyn8sIXF6AAOs6bDBedR00VlSEAyDKFxG4AGUELE6EU1i88zPo8QgH2AsYXTLgvkEDChQCLlAAuECi67DBeNV10FhREY4BFSgEVCAELE6EU1h8wzPol8gOHbTuoPeRIfg9sBVAq8Y+QWRr/DM065vre4GGw2QdwyH3NsKD3hfovczirRUMU42hiWgGatsCse24QGpraNy5AmULtlGgeJKbwNCAVMNGGNEdgP0UyIKVNO52gbIFty/Qd6K9keaMYZ3UAAAAAElFTkSuQmCC");
sc.minFilter=N.NearestFilter;sc.magFilter=N.NearestFilter;function tc(a){a.u||(a.u=!0,requestAnimationFrame(()=>a.render()))}function X(a,b,c,d,e){const f=(0,t)(b,c,d),g=(0,rc)(e);a.m[f]!==e&&(a.m[f]=e,a.J[f]&&a.o.remove((0,lb)(a.J[f])),a.J[f]=void 0,"minecraft:air"!==e&&"minecraft:cave_air"!==e&&(e=new N.Mesh(g.j,g.o),e.position.set(b,c,d),e.setRotationFromEuler(g.m),a.J[f]=e,a.o.add(e)))}function uc(a,b,c,d){return a.m[(0,t)(b,c,d)]??"minecraft:air"}
function vc(a){var b=a.H.domElement;const c=b.clientWidth,d=b.clientHeight;(b=b.width!==c||b.height!==d)&&a.H.setSize(c,d,!1);return b}
var wc=class extends EventTarget{constructor(a){super();this.m={};this.J={};this.u=!1;this.M=!0;const b="string"===typeof a?(0,y)(a,HTMLCanvasElement):a;this.T=new IntersectionObserver(d=>{for(const e of d)this.M=e.isIntersecting});this.T.observe(b);this.H=new N.WebGLRenderer({canvas:b,antialias:!0});this.B=new N.Vector2;b.addEventListener("mousemove",d=>{const e=b.getBoundingClientRect();this.B.x=(d.clientX-e.left)/b.clientWidth*2-1;this.B.y=2*-((d.clientY-e.top)/b.clientHeight)+1;tc(this)});this.N=
new N.Raycaster;a=new N.Scene;a.background=new N.Color("#fff");this.L=new N.DirectionalLight(7829367);this.L.position.set(0,1,0);a.add(this.L);this.G=new N.DirectionalLight(4473924);this.G.position.set(1,0,0);a.add(this.G);this.C=new N.DirectionalLight(4473924);this.C.position.set(-1,0,0);a.add(this.C);this.I=new N.DirectionalLight(2236962);this.I.position.set(0,0,1);a.add(this.I);this.D=new N.DirectionalLight(2236962);this.D.position.set(0,0,-1);a.add(this.D);this.S=new N.AmbientLight(8947848);a.add(this.S);
this.o=a;this.camera=new N.PerspectiveCamera(75,1,.1,1E3);a=new vb.OrbitControls(this.camera,b);a.update();a.minDistance=1;a.maxDistance=100;this.j=a;const c=()=>{const d=this.H.domElement,e=d.clientWidth,f=d.clientHeight;if(d.width!==e||d.height!==f)this.H.setSize(e,f,!1),this.camera.aspect=e/f,this.camera.updateProjectionMatrix(),tc(this)};a.addEventListener("change",()=>tc(this));window.addEventListener("resize",()=>c());document.querySelector(".main-panel")?.addEventListener("sl-reposition",()=>
c());document.querySelector(".secondary-panel")?.addEventListener("sl-reposition",()=>c());this.render()}render(){if(this.M){this.u=!1;if(vc(this)){var a=this.H.domElement;this.camera.aspect=a.clientWidth/a.clientHeight;this.camera.updateProjectionMatrix()}this.N.setFromCamera(this.B,this.camera);a=this.N.intersectObjects(this.o.children);for(var b of a){a=b.object.position.x|0;const c=b.object.position.y|0;b=b.object.position.z|0;this.dispatchEvent(new CustomEvent("hover",{detail:{x:a,y:c,z:b,O:uc(this,
a,c,b)}}));break}this.j.update();this.H.render(this.o,this.camera)}else requestAnimationFrame(()=>this.render())}};const xc=new Map;
async function yc(){var a=await Promise.all(Array.from(document.querySelectorAll('object[type="application/vnd.litematica+nbt"]')).map(async d=>{var e=d.getAttribute("data");if(null==e)throw Error("embedded litematic must have a [data] attribute.");e=await fetch(e);return e.ok?{P:d,data:await e.arrayBuffer()}:{P:d,data:null}}));for(const {P:d,data:e}of a)if(e){a=(0,y)("#canvas",HTMLCanvasElement);const f=new wc(a);f.j.autoRotate="true"===d.dataset.autorotate;a.addEventListener("dblclick",()=>{console.log(f.j.target,
f.camera.position)});a=await (0,Na)(new Uint8Array(e));a=new sb(a);for(var b=0;b<a.height;b++)for(var c=0;c<a.length;c++)for(let g=0;g<a.width;g++){const h=a.F(g,b,c);X(f,g,b,c,h)}xc.set(d,{H:f,W:a});c=d.dataset.camera;b=d.dataset.target;null!=c&&null!=b?(a=(0,G)(c),b=(0,G)(b),f.camera.position.set(a[0],a[1],a[2]),f.j.target.set(b[0],b[1],b[2])):f.j.target.set(a.width/2,a.height/2,a.length/2)}for(const d of document.querySelectorAll(".revealer")){const e=()=>{var f=(0,lb)(d.getAttribute("for"));f=
(0,lb)(document.getElementById(f));const {H:g,W:h}=(0,lb)(xc.get(f));f=Math.round(h.height*(1-Number(d.value)/100));console.log(f);for(let r=0;r<h.height;r++)for(let D=0;D<h.length;D++)for(let K=0;K<h.width;K++){var l=h.F(K,r,D);if("minecraft:smooth_basalt"===l||"minecraft:calcite"===l||"minecraft:amethyst_block"===l){l=K;var v=r,u=D;if(l=g.J[(0,t)(l,v,u)])l.visible=r<f}}};d.addEventListener("sl-change",()=>{e()});e()}};function zc(a,b){var c=a.G[b];return c?c??0:(c=a.D.length,a.D[c]=b,a.G[b]=c)}function Ac(a){const b=a.canvas.width/2,c=a.canvas.height/2;return{left:a.m-b,right:a.m+b+a.j,top:a.o-c,bottom:a.o+c+a.j}}function Bc(a){try{if(a.B&&(a.m+=.1*-a.m,a.o+=.1*-a.o,1>Math.abs(a.m)&&1>Math.abs(a.o)&&(a.B=!1)),a.u||a.B)a.render(),a.u=!1}finally{requestAnimationFrame(()=>Bc(a))}}function Cc(a,b,c){b=Math.floor(b/32);c=Math.floor(c/32);c=(0,t)(b,0,c);return(b=a.I[c])?b:a.I[c]=new Uint16Array(1024)}
function Dc(a,b,c,d){Cc(a,b,c)[(b%32+32)%32+(c%32+32)%32*32]=zc(a,d)}function Ec(a,b,c){const d=Cc(a,b,c);return d?a.D[d[(b%32+32)%32+(c%32+32)%32*32]]??a.C:a.C}
var Fc=class{constructor(a){this.C="#999";this.I={};this.G={};this.D=[];this.o=this.m=0;this.j=16;this.u=this.B=!1;this.canvas=a instanceof HTMLCanvasElement?a:(0,y)(a,HTMLCanvasElement);this.context=(0,kb)(this.canvas.getContext("2d"),CanvasRenderingContext2D);zc(this,this.C);a=this.canvas.getBoundingClientRect();this.canvas.width=a.right-a.left;this.canvas.height=a.bottom-a.top;this.canvas.addEventListener("mousemove",b=>{1===b.buttons&&(this.B=!1,this.m-=b.movementX,this.o-=b.movementY,console.log(b.movementX,
b.movementY),this.u=!0)},{passive:!0});this.canvas.addEventListener("wheel",b=>{b.preventDefault();this.B=!1;var c=Ac(this);const d=this.canvas.getBoundingClientRect(),e=(c.left+b.clientX-d.left)/this.j;c=(c.top+b.clientY-d.top)/this.j;this.j-=Math.sign(b.deltaY);4>this.j&&(this.j=4);const f=Ac(this),g=(f.top+b.clientY-d.top)/this.j;this.m+=this.j*(e-(f.left+b.clientX-d.left)/this.j);this.o+=this.j*(c-g);this.u=!0});requestAnimationFrame(()=>Bc(this))}render(){this.context.fillStyle=this.C;this.context.fillRect(0,
0,this.canvas.width,this.canvas.height);const {left:a,right:b,top:c,bottom:d}=Ac(this);for(let e=c;e<d;e+=this.j)for(let f=a;f<b;f+=this.j){const g=Math.floor(f/this.j),h=Math.floor(e/this.j);this.context.fillStyle=Ec(this,g,h);this.context.fillRect(Math.floor(g*this.j-a),Math.floor(h*this.j-c),this.j,this.j)}}addEventListener(a,b){this.canvas.addEventListener(a,c=>{const {left:d,top:e}=Ac(this),f=this.canvas.getBoundingClientRect();b(Math.floor((d+(c.clientX-f.left))/this.j),Math.floor((e+(c.clientY-
f.top))/this.j))},{passive:!0})}};
//# sourceMappingURL=renderer.js.map
